<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Morse Code Translator</title>
    <style>
        body {
            font-family: sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            padding: 20px;
            background: radial-gradient(circle, #ffffff, #aed6f1); /* Shiny radial gradient */
            color: #333; /* Default text color */
            min-height: 100vh;
            margin: 0;
        }
        .translator-box {
            background-color: rgba(255, 255, 255, 0.8); /* Slightly transparent white box */
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            width: 80%;
            max-width: 600px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        h1 {
            text-align: center;
            color: #333;
        }
        label {
            font-weight: bold;
            color: #555;
        }
        textarea, #output { /* Apply shared styles */
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            resize: vertical;
            font-family: monospace;
            width: 100%;
            box-sizing: border-box;
            color: #333;
            background-color: #f9f9f9; /* Light background for input/output */
        }
        #output-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            width: 100%;
        }
        #output {
            white-space: pre-wrap;
            height: auto;
            min-height: 100px;
        }
        .button-container {
            display: flex;
            gap: 10px;
            justify-content: flex-end; /* Align buttons to the right */
        }
        .action-button {
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: transform 0.2s ease-in-out;
        }
        #copyButton {
            background: linear-gradient(90deg, red, orange, yellow, green, blue, indigo, violet);
            color: white;
            animation: rainbow-shine 2s infinite alternate;
            background-size: 400% 100%;
        }
        #clearButton {
            background-color: #f44336; /* Red color for clear */
            color: white;
        }
        .playback-options {
            display: flex;
            gap: 15px;
            align-items: center;
            margin-top: 20px;
        }
        .playback-button {
            padding: 10px 15px;
            border: 1px solid #ccc;
            border-radius: 4px;
            background-color: #eee;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
        }
        .playback-button:hover {
            background-color: #ddd;
        }
        .playback-controls label {
            font-weight: normal;
        }
        .playback-controls input[type="number"] {
            width: 60px;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .action-button:hover, .playback-button:hover {
            transform: scale(1.05);
        }
        @keyframes rainbow-shine {
            0% { background-position: 0% 50%; }
            100% { background-position: 100% 50%; }
        }
    </style>
</head>
<body>
    <h1>Morse Code Translator</h1>

    <div class="translator-box">
        <label for="inputText">Enter Text or Morse Code:</label>
        <textarea id="inputText" rows="5" placeholder="Type here..."></textarea>

        <div class="button-container">
            <button id="clearButton" class="action-button" onclick="clearText()">Clear</button>
        </div>

        <label for="output">Translation:</label>
        <div id="output-container">
            <pre id="output"></pre>
            <button id="copyButton" class="action-button" onclick="copyToClipboard()">Copy</button>
        </div>
    </div>

    <div class="playback-options">
        <button id="soundButton" class="playback-button" onclick="playSound()">Play Sound</button>
        <div class="playback-controls">
            <label for="speed">Speed (WPM):</label>
            <input type="number" id="speed" value="20" min="5" max="40">
            <label for="frequency">Frequency (Hz):</label>
            <input type="number" id="frequency" value="600" min="200" max="1000">
        </div>
    </div>

    <script>
        const morseCode = { /* ... your existing Morse code dictionary ... */ };
        const reverseMorseCode = { /* ... your existing reverse Morse code dictionary ... */ };
        const inputText = document.getElementById("inputText");
        const outputElement = document.getElementById("output");
        const speedInput = document.getElementById("speed");
        const frequencyInput = document.getElementById("frequency");

        inputText.addEventListener('input', function() { /* ... your existing input event listener ... */ });
        function encodeTextLive(text) { /* ... your existing encode function ... */ }
        function decodeMorseLive(morseText) { /* ... your existing decode function ... */ }
        function isMorse(text) { /* ... your existing isMorse function ... */ }
        function copyToClipboard() { /* ... your existing copy function ... */ }
        function fallbackCopyToClipboard(text) { /* ... your existing fallback copy function ... */ }
        function clearText() { /* ... your existing clear function ... */ }

        function playSound() {
            const morse = outputElement.textContent;
            const speedWPM = parseInt(speedInput.value);
            const frequencyHz = parseInt(frequencyInput.value);

            // Basic timing calculation (approximate)
            const ditDurationMs = 60000 / (speedWPM * 50); // 50 units per word (average)

            // Placeholder for actual sound generation logic using Web Audio API
            if (morse) {
                alert("Playing sound for: " + morse + "\nSpeed: " + speedWPM + " WPM\nFrequency: " + frequencyHz + " Hz\n(Sound implementation needs to be added here)");
                // Example of how you might iterate through the Morse code:
                // for (const char of morse) {
                //     if (char === '.') {
                //         // Play 'dit' sound for ditDurationMs
                //     } else if (char === '-') {
                //         // Play 'dah' sound for 3 * ditDurationMs
                //     } else if (char === ' ') {
                //         // Pause for 3 * ditDurationMs (letter space)
                //     } else if (char === '/') {
                //         // Pause for 7 * ditDurationMs (word space)
                //     }
                // }
            } else {
                alert("No Morse code to play.");
            }
        }

        // Placeholder functions for Flashlight and Vibration (implementation needed)
        // function flashMorse() {
        //     const morse = outputElement.textContent;
        //     alert("Flashlight Morse for: " + morse + " (Flashlight implementation needed)");
        //     // Use browser APIs to control the device's flashlight
        // }

        // function vibrateMorse() {
        //     const morse = outputElement.textContent;
        //     alert("Vibrating Morse for: " + morse + " (Vibration implementation needed)");
        //     // Use browser Vibration API
        // }
    </script>
</body>
</html>
